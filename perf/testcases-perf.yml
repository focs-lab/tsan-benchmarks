runtimes:
  - name: base-tsan
    openmp: /home/d/danilws/llvm-builds/llvm-latest-base/build/runtimes/runtimes-bins/openmp/runtime/src
    compiler-rt: /home/d/danilws/llvm-builds/llvm-latest-base/build/lib/clang/19/lib/x86_64-unknown-linux-gnu
    symbolizer: /home/d/danilws/llvm-builds/llvm-latest-base/build/bin/llvm-symbolizer
  - name: custom-tsan
    openmp: /home/d/danilws/llvm-builds/llvm-latest-treeclocks/build/runtimes/runtimes-bins/openmp/runtime/src
    compiler-rt: /home/d/danilws/llvm-builds/llvm-latest-treeclocks/build/lib/clang/19/lib/x86_64-unknown-linux-gnu
    symbolizer: /home/d/danilws/llvm-builds/llvm-latest-treeclocks/build/bin/llvm-symbolizer

tests:
  mini:
    timeout: 180
    tests:
      - name: OmpSCR
        tests:
          - name: OmpSCR-fft
            cmd: ./c_fft.par 8
          - name: OmpSCR-fft6
            cmd: ./c_fft6.par 256 256

      - name: DRB
        tests:
          - name: DRB122
            cmd: ./DRB122-taskundeferred-orig-no.c.tsan-clang.out
          - name: DRB123
            cmd: ./DRB123-taskundeferred-orig-yes.c.tsan-clang.out
          - name: DRB150
            cmd: ./DRB150-missinglock1-orig-gpu-yes.c.tsan-clang.out
          - name: DRB152
            cmd: ./DRB152-missinglock2-orig-gpu-no.c.tsan-clang.out
          - name: DRB154
            cmd: ./DRB154-missinglock3-orig-gpu-no.c.tsan-clang.out
          - name: DRB155
            cmd: ./DRB155-missingordered-orig-gpu-no.c.tsan-clang.out
          - name: DRB177
            cmd: ./DRB177-fib-taskdep-yes.c.tsan-clang.out

      - name: DRACC
        tests:
          - name: DRACC_OMP_017
            cmd: ./DRACC_OMP_017_Counter_wrong_lock_Inter_yes.exe
          - name: DRACC_OMP_018
            cmd: ./DRACC_OMP_018_Counter_wrong_lock_simd_yes.exe
          - name: DRACC_OMP_019
            cmd: ./DRACC_OMP_019_Counter_wrong_lock_simd_Intra_yes.exe
          - name: DRACC_OMP_020
            cmd: ./DRACC_OMP_020_Counter_wrong_lock_simd_Inter_yes.exe

      - name: miniFE
        tests:
          - name: miniFE
            cmd: ./miniFE.x
            cleanup: rm miniFE.*.yaml

      - name: HPCCG
        tests:
          - name: HPCCG_64_64_64
            cmd: ./test_HPCCG 64 64 64
            cleanup: rm hpccg*

  medium:
    timeout: 900
    tests:
      - name: OmpSCR
        tests:
        - name: OmpSCR-fft
          cmd: ./c_fft.par 8
        - name: OmpSCR-fft6
          cmd: ./c_fft6.par 256 256

      - name: DRB
        tests:
        - name: DRB122
          cmd: ./DRB122-taskundeferred-orig-no.c.tsan-clang.out
        - name: DRB123
          cmd: ./DRB123-taskundeferred-orig-yes.c.tsan-clang.out
        - name: DRB150
          cmd: ./DRB150-missinglock1-orig-gpu-yes.c.tsan-clang.out
        - name: DRB152
          cmd: ./DRB152-missinglock2-orig-gpu-no.c.tsan-clang.out
        - name: DRB154
          cmd: ./DRB154-missinglock3-orig-gpu-no.c.tsan-clang.out
        - name: DRB155
          cmd: ./DRB155-missingordered-orig-gpu-no.c.tsan-clang.out
        - name: DRB177
          cmd: ./DRB177-fib-taskdep-yes.c.tsan-clang.out

      - name: DRACC
        tests:
          - name: DRACC_OMP_017
            cmd: ./DRACC_OMP_017_Counter_wrong_lock_Inter_yes.exe
          - name: DRACC_OMP_018
            cmd: ./DRACC_OMP_018_Counter_wrong_lock_simd_yes.exe
          - name: DRACC_OMP_019
            cmd: ./DRACC_OMP_019_Counter_wrong_lock_simd_Intra_yes.exe
          - name: DRACC_OMP_020
            cmd: ./DRACC_OMP_020_Counter_wrong_lock_simd_Inter_yes.exe

      # - name: mabain
      #   tests:
      #     - name: mb_rc_test
      #       cmd: ./mb_rc_test

      - name: iris
        tests:
          - name: iris
            cmd: ./test2

      - name: npb-omp
        tests:
          - name: dc.S.x
            cmd: ./dc.S.x
            cleanup: rm ADC.*
          - name: is.W.x
            cmd: ./is.W.x
            cleanup: rm ADC.*

      - name: miniFE
        tests:
          - name: miniFE
            cmd: ./miniFE.x
            cleanup: rm miniFE.*.yaml

      - name: miniAMR
        tests:
          - name: miniAMR
            cmd: ./ma.x

      - name: HPCCG
        tests:
          - name: HPCCG_64_64_64
            cmd: ./test_HPCCG 64 64 64
            cleanup: rm hpccg*

      - name: kripke
        tests:
          - name: kripke_groups_8_niter_1
            cmd: ./kripke.exe --groups 8 --niter 1

      - name: lulesh
        tests:
          - name: lulesh_size_3
            cmd: ./lulesh2.0 -q -s 3

      - name: xsbench
        tests:
          - name: xsbench_small
            cmd: ./XSBench -small

      - name: rsbench
        tests:
          - name: rsbench_small
            cmd: ./rsbench -s small

      - name: quicksilver
        tests:
          - name: quicksilver_N_1
            cmd: ./qs -N 1

      - name: comd
        tests:
          - name: CoMD_N_1
            cmd: ./CoMD-openmp -N 1
            cleanup: rm CoMD*.yaml

      - name: AMG
        tests:
          - name: AMG
            cmd: ./amg

      - name: graphchi
        tests:
          - name: graphchi_pagerank_facebook
            cmd: bin/example_apps/pagerank file data/facebook_combined.txt niters 5000 filetype edgelist

      - name: c-ray
        tests:
          - name: c-ray_8_threads
            cmd: ./c-ray-mt -t 8 -s 1600x1200 -r 8 -i sphfract -o output.ppm
            cleanup: rm output.ppm
          # - name: c-ray-16_threads
          #   cmd: ./c-ray-mt -t 16 -s 1600x1200 -r 8 -i sphfract -o output.ppm
          #   cleanup: rm output.ppm
          - name: c-ray_32_threads
            cmd: ./c-ray-mt -t 32 -s 1600x1200 -r 8 -i sphfract -o output.ppm
            cleanup: rm output.ppm
          # - name: c-ray_64_threads
          #   cmd: ./c-ray-mt -t 64 -s 1600x1200 -r 8 -i sphfract -o output.ppm
          #   cleanup: rm output.ppm
          - name: c-ray_128_threads
            cmd: ./c-ray-mt -t 128 -s 1600x1200 -r 8 -i sphfract -o output.ppm
            cleanup: rm output.ppm

      - name: graphicsmagick
        tests:
          - name: graphicsmagick_gaussian_1_8_threads
            env:
              - name: OMP_NUM_THREADS
                value: 8
            cmd: bin/gm benchmark convert sample-photo-6000x4000.JPG -gaussian 0x1 output.ppm
            cleanup: rm output.ppm
          - name: graphicsmagick_gaussian_1_32_threads
            env:
              - name: OMP_NUM_THREADS
                value: 32
            cmd: bin/gm benchmark convert sample-photo-6000x4000.JPG -gaussian 0x1 output.ppm
            cleanup: rm output.ppm
          - name: graphicsmagick_gaussian_1_128_threads
            env:
              - name: OMP_NUM_THREADS
                value: 128
            cmd: bin/gm benchmark convert sample-photo-6000x4000.JPG -gaussian 0x1 output.ppm
            cleanup: rm output.ppm
          - name: graphicsmagick_gaussian_32_8_threads
            env:
              - name: OMP_NUM_THREADS
                value: 8
            cmd: bin/gm benchmark convert sample-photo-6000x4000.JPG -gaussian 0x20 output.ppm
            cleanup: rm output.ppm
          - name: graphicsmagick_gaussian_32_32_threads
            env:
              - name: OMP_NUM_THREADS
                value: 32
            cmd: bin/gm benchmark convert sample-photo-6000x4000.JPG -gaussian 0x20 output.ppm
            cleanup: rm output.ppm
          - name: graphicsmagick_gaussian_32_128_threads
            env:
              - name: OMP_NUM_THREADS
                value: 128
            cmd: bin/gm benchmark convert sample-photo-6000x4000.JPG -gaussian 0x20 output.ppm
            cleanup: rm output.ppm

  big:
    timeout: 600
    tests:
      - name: ffmpeg
        tests:
          - name: ffmpeg_mov_to_mp4_16_threads
            cmd: bin/ffmpeg -y -threads 16 -i tears_of_steel_720p.mov output.mp4
            cleanup: rm output.mp4

    # - name: silo
    #   tests:
    #     - name: silo_dbtest
    #       cmd: ./dbtest

    # - name: gdax
    #   tests:
    #     - name: gdax
    #       cmd: LD_LIBRARY_PATH=./dependencies/libcds-2.3.2/build-release/bin:$LD_LIBRARY_PATH ./demo

    # - name: SimpleMOC
    #   tests:
    #     - name: SimpleMOC_small
    #       cmd: ./SimpleMOC -s

  # temp:
  #   - name: iris
  #     tests:
  #       - name: iris
  #         cmd: ./test2

  #   - name: miniFE
  #     tests:
  #       - name: miniFE
  #         cmd: ./miniFE.x
  #         cleanup: rm miniFE.*.yaml